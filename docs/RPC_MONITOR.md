# RPCåˆçº¦ç›‘æ§å™¨

## æ¦‚è¿°

RPCåˆçº¦ç›‘æ§å™¨æ˜¯ä¸€ä¸ªç¨³å®šçš„ã€åŸºäºHTTPè½®è¯¢çš„Hyperliquidåˆçº¦äº¤æ˜“ç›‘æ§è§£å†³æ–¹æ¡ˆï¼Œä¸“é—¨è®¾è®¡ç”¨æ¥è§£å†³WebSocketè¿æ¥ä¸ç¨³å®šå’Œå¤§è®¢å•å­æˆäº¤é‡å¤è­¦æŠ¥çš„é—®é¢˜ã€‚

## æ ¸å¿ƒç‰¹æ€§

### ğŸ”„ HTTPè½®è¯¢ç­–ç•¥
- **ç¨³å®šæ€§**: é¿å…WebSocketè¿æ¥é¢‘ç¹æ–­çº¿é—®é¢˜
- **å¯é æ€§**: ä½¿ç”¨Hyperliquidå®˜æ–¹HTTP APIï¼Œç¨³å®šæ€§æ›´é«˜
- **å¯æ§æ€§**: è½®è¯¢é—´éš”å¯é…ç½®ï¼Œé»˜è®¤15ç§’ä¸€æ¬¡

### ğŸ¯ è®¢å•èšåˆæœºåˆ¶
- **æ™ºèƒ½èšåˆ**: è‡ªåŠ¨è¯†åˆ«åŒä¸€è®¢å•ID(oid)çš„å¤šä¸ªå­æˆäº¤
- **æ—¶é—´çª—å£**: 5ç§’å†…çš„å­æˆäº¤ä¼šè¢«èšåˆä¸ºä¸€ä¸ªè­¦æŠ¥
- **åŠ æƒå¹³å‡**: è®¡ç®—èšåˆè®¢å•çš„åŠ æƒå¹³å‡ä»·æ ¼
- **å®Œæ•´ä¿¡æ¯**: ä¿ç•™åŸå§‹å­æˆäº¤æ•°é‡å’Œèšåˆæ—¶é—´è·¨åº¦

### ğŸ“Š åœ°å€éªŒè¯
- **ä¸¥æ ¼åŒ¹é…**: éªŒè¯æ¯ä¸ªå¡«å……äº‹ä»¶çš„ç”¨æˆ·åœ°å€ï¼Œé¿å…è¯¯æŠ¥
- **æ•°æ®å®Œæ•´æ€§**: éªŒè¯å¿…è¦å­—æ®µå­˜åœ¨æ€§
- **èµ„äº§è¿‡æ»¤**: è‡ªåŠ¨è·³è¿‡ç°è´§äº¤æ˜“(@å¼€å¤´çš„èµ„äº§)

### ğŸ” å®æ—¶ç›‘æ§
- **ç‹¬ç«‹è½®è¯¢**: æ¯ä¸ªäº¤æ˜“å‘˜ç‹¬ç«‹è½®è¯¢çº¿ç¨‹
- **é”™è¯¯æ¢å¤**: è¿ç»­é”™è¯¯è‡ªåŠ¨å¢åŠ é‡è¯•é—´éš”
- **å¥åº·ç›‘æ§**: å®æ—¶ç›‘æ§ç³»ç»Ÿå¥åº·çŠ¶æ€å’Œç»Ÿè®¡ä¿¡æ¯

## è§£å†³çš„é—®é¢˜

### 1. WebSocketè¿æ¥ä¸ç¨³å®š
**é—®é¢˜**: WebSocketè¿æ¥ç»å¸¸æ–­çº¿ï¼Œé‡è¿æœºåˆ¶å¤æ‚ä¸”ä¸å¯é 
**è§£å†³**: ä½¿ç”¨HTTPè½®è¯¢ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œé¿å…è¿æ¥çŠ¶æ€é—®é¢˜

### 2. å¤§è®¢å•å­æˆäº¤é‡å¤è­¦æŠ¥
**é—®é¢˜**: ä¸€ä¸ª4.22094 BTCçš„å¤§è®¢å•ä¼šåˆ†è§£æˆå‡ ç™¾ä¸ªå°è®¢å•ï¼Œäº§ç”Ÿå¤§é‡é‡å¤è­¦æŠ¥
**è§£å†³**: 
- é€šè¿‡è®¢å•ID(oid)è¯†åˆ«åŒä¸€æ¯è®¢å•çš„å­æˆäº¤
- 5ç§’æ—¶é—´çª—å£å†…èšåˆæ‰€æœ‰å­æˆäº¤
- è®¡ç®—èšåˆåçš„æ€»é‡å’ŒåŠ æƒå¹³å‡ä»·æ ¼
- åªå‘é€ä¸€ä¸ªèšåˆåçš„è­¦æŠ¥

### 3. åœ°å€æ˜ å°„é”™è¯¯
**é—®é¢˜**: æ”¶åˆ°é”™è¯¯äº¤æ˜“å‘˜çš„è­¦æŠ¥ï¼Œåœ°å€æ˜ å°„ä¸æ­£ç¡®
**è§£å†³**:
- ä¸¥æ ¼éªŒè¯æ¯ä¸ªå¡«å……äº‹ä»¶çš„ç”¨æˆ·åœ°å€
- åªå¤„ç†åŒ¹é…æŒ‡å®šäº¤æ˜“å‘˜åœ°å€çš„äº‹ä»¶
- è¯¦ç»†çš„è°ƒè¯•æ—¥å¿—è®°å½•åœ°å€åŒ¹é…è¿‡ç¨‹

## é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡
```bash
# å¯ç”¨RPCç›‘æ§å™¨
CONTRACT_MONITOR_TYPE=rpc

# åˆçº¦ç›‘æ§åŸºæœ¬é…ç½®
CONTRACT_MONITORING_ENABLED=true
CONTRACT_MIN_NOTIONAL=100  # æœ€å°åä¹‰ä»·å€¼é˜ˆå€¼
```

## ä¸WebSocketæ–¹æ¡ˆå¯¹æ¯”

| ç‰¹æ€§ | RPCç›‘æ§å™¨ | WebSocketç›‘æ§å™¨ |
|------|-----------|-----------------|
| è¿æ¥ç¨³å®šæ€§ | âœ… ä¼˜ç§€ | âŒ ç»å¸¸æ–­çº¿ |
| å­è®¢å•å¤„ç† | âœ… æ™ºèƒ½èšåˆ | âŒ é‡å¤è­¦æŠ¥ |
| åœ°å€éªŒè¯ | âœ… ä¸¥æ ¼éªŒè¯ | âš ï¸ å®¹æ˜“è¯¯æŠ¥ |
| å®æ—¶æ€§ | âš ï¸ 15ç§’å»¶è¿Ÿ | âœ… å®æ—¶ |
| èµ„æºæ¶ˆè€— | âœ… ä½ | âš ï¸ ä¸­ç­‰ |
| å¼€å‘å¤æ‚åº¦ | âœ… ç®€å• | âŒ å¤æ‚ |
| é”™è¯¯æ¢å¤ | âœ… è‡ªåŠ¨æ¢å¤ | âŒ éœ€è¦é‡å¯ |

## ä½¿ç”¨æ–¹æ³•

### å¯åŠ¨ç›‘æ§å™¨
```typescript
const monitor = new RpcContractMonitor(traders, minNotionalValue);

monitor.on('contractEvent', (event, trader) => {
  console.log('æ”¶åˆ°åˆçº¦äº‹ä»¶:', {
    trader: trader.label,
    asset: event.asset,
    size: event.size,
    side: event.side,
    isAggregated: event.metadata?.isAggregated
  });
});

await monitor.start();
```

## æ€»ç»“

RPCåˆçº¦ç›‘æ§å™¨é€šè¿‡HTTPè½®è¯¢å’Œæ™ºèƒ½è®¢å•èšåˆï¼Œæœ‰æ•ˆè§£å†³äº†WebSocketæ–¹æ¡ˆçš„ç¨³å®šæ€§é—®é¢˜å’Œå¤§è®¢å•é‡å¤è­¦æŠ¥é—®é¢˜ã€‚å®ƒæä¾›äº†å¯é çš„äº¤æ˜“ç›‘æ§èƒ½åŠ›ï¼Œç‰¹åˆ«é€‚åˆéœ€è¦ç¨³å®šæ€§é«˜äºå®æ—¶æ€§çš„ç›‘æ§åœºæ™¯ã€‚

ä¸»è¦ä¼˜åŠ¿ï¼š
- âœ… è§£å†³è¿æ¥ç¨³å®šæ€§é—®é¢˜
- âœ… æ™ºèƒ½å¤„ç†å¤§è®¢å•å­æˆäº¤
- âœ… ä¸¥æ ¼çš„åœ°å€éªŒè¯é¿å…è¯¯æŠ¥
- âœ… å®Œå–„çš„é”™è¯¯æ¢å¤æœºåˆ¶
- âœ… è¯¦ç»†çš„ç›‘æ§æŒ‡æ ‡å’Œæ—¥å¿—
